---
import { getSession } from "auth-astro/server";

const session = (await getSession(Astro.request)) as any;
import SignInAlert from "../components/SignInAlert.astro";

---

<header
  class="flex justify-between fixed top-0 left-0 w-full z-50 px-[4rem] py-[1rem]"
>
  {!session && <SignInAlert />}
  <div class="flex flex-col">
    <a
      href="/"
      class="text-white cursor-pointer tracking-tighter text-2xl font-semibold"
    >
      Green Digital
    </a>
  </div>
  <nav class="flex items-center gap-5">
    {
      session ? (
        <button
          id="log-out"
          class="text-white tracking-tight text-md font-medium cursor-pointer">
            Log out
          </button>
      ) : (
        <button
          id="sign-in"
          class="text-white tracking-tight text-md font-medium cursor-pointer"
        >
          Sign in
        </button>
      )
    }
    <a
      href="/dashboard"
      class="text-white tracking-tight text-md font-medium cursor-pointer"
      >Dashboard</a
    >
    <a
      href=""
      class="text-white tracking-tight text-md font-medium cursor-pointer"
      >Github</a
    >
    <a
      href=""
      class="text-white tracking-tight text-md font-medium cursor-pointer"
      >Contact</a
    >
  </nav>
</header>

<script>
  const { signOut } = await import("auth-astro/client");

  const logOutButton = document.getElementById("log-out") as HTMLButtonElement;

  if (logOutButton) {
    logOutButton.onclick = () => signOut();
  }
</script>
